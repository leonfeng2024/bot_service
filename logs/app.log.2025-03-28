2025-03-28 13:43:25,462 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:25,614 - tools.postgresql_tools - INFO - Successfully connected to PostgreSQL database at localhost:5432
2025-03-28 13:43:25,618 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:29,608 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:40,349 - __main__ - INFO - API调用: POST /chat, 参数: {'username': 'user', 'query': '我需要改修表字段employees', 'uuid': 'e857c4e4-be46-41dc-9d9a-b3fd8b131a7e'}
2025-03-28 13:43:40,354 - __main__ - INFO - Received chat request - User: user, UUID: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e
2025-03-28 13:43:46,547 - httpx - INFO - HTTP Request: POST https://openai-southus-trng-app-chatbot01.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-28 13:43:46,557 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:46,625 - opensearch - INFO - GET http://localhost:9200/ [status:200 request:0.066s]
2025-03-28 13:43:46,671 - tools.postgresql_tools - INFO - Successfully connected to PostgreSQL database at localhost:5432
2025-03-28 13:43:46,675 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:46,714 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:47,000 - opensearch - INFO - HEAD http://localhost:9200/procedure_index [status:200 request:0.286s]
2025-03-28 13:43:48,191 - httpx - INFO - HTTP Request: POST https://openai-southus-trng-app-chatbot01.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-28 13:43:48,611 - opensearch - INFO - HEAD http://localhost:9200/procedure_index [status:200 request:0.023s]
2025-03-28 13:43:48,682 - opensearch - INFO - GET http://localhost:9200/procedure_index/_mapping [status:200 request:0.071s]
2025-03-28 13:43:51,820 - opensearch - INFO - POST http://localhost:9200/procedure_index/_search [status:200 request:3.137s]
2025-03-28 13:43:51,824 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e
2025-03-28 13:43:51,979 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e:postgresql
2025-03-28 13:43:53,963 - httpx - INFO - HTTP Request: POST https://openai-southus-trng-app-chatbot01.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-28 13:43:53,996 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: to_field)} {position: line: 12, column: 19, offset: 466} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:43:53,996 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: sourceField)} {position: line: 9, column: 19, offset: 320} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:43:53,996 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: targetField)} {position: line: 10, column: 19, offset: 371} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:43:53,996 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: relationshipDescription)} {position: line: 14, column: 19, offset: 565} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:43:53,996 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: createdAt)} {position: line: 16, column: 19, offset: 671} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:43:53,996 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: from_field)} {position: line: 11, column: 19, offset: 422} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:43:53,999 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e
2025-03-28 13:43:54,002 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e:opensearch
2025-03-28 13:43:54,004 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e:postgresql
2025-03-28 13:43:54,007 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e:neo4j
2025-03-28 13:43:54,558 - httpx - INFO - HTTP Request: POST https://openai-southus-trng-app-chatbot01.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-28 13:43:54,562 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:54,602 - opensearch - INFO - GET http://localhost:9200/ [status:200 request:0.040s]
2025-03-28 13:43:54,629 - tools.postgresql_tools - INFO - Successfully connected to PostgreSQL database at localhost:5432
2025-03-28 13:43:54,632 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:54,666 - tools.redis_tools - INFO - Redis connection established successfully to localhost:6379
2025-03-28 13:43:54,705 - opensearch - INFO - HEAD http://localhost:9200/procedure_index [status:200 request:0.039s]
2025-03-28 13:43:55,339 - httpx - INFO - HTTP Request: POST https://openai-southus-trng-app-chatbot01.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-28 13:43:55,510 - opensearch - INFO - HEAD http://localhost:9200/procedure_index [status:200 request:0.020s]
2025-03-28 13:43:55,532 - opensearch - INFO - GET http://localhost:9200/procedure_index/_mapping [status:200 request:0.022s]
2025-03-28 13:43:55,940 - opensearch - INFO - POST http://localhost:9200/procedure_index/_search [status:200 request:0.407s]
2025-03-28 13:43:55,942 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e
2025-03-28 13:43:56,072 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e:postgresql
2025-03-28 13:44:00,540 - httpx - INFO - HTTP Request: POST https://openai-southus-trng-app-chatbot01.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-28 13:44:00,581 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: to_field)} {position: line: 12, column: 19, offset: 466} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:44:00,582 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: sourceField)} {position: line: 9, column: 19, offset: 320} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:44:00,582 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: targetField)} {position: line: 10, column: 19, offset: 371} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:44:00,582 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: relationshipDescription)} {position: line: 14, column: 19, offset: 565} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:44:00,582 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: createdAt)} {position: line: 16, column: 19, offset: 671} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:44:00,582 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: from_field)} {position: line: 11, column: 19, offset: 422} for query: '\n            MATCH (a:Table)-[r:RELATED_TO]->(b:Table)\n            WHERE a.name = $term OR b.name = $term\n            RETURN \n                a.name as source_table,\n                b.name as target_table,\n                r.source_field as source_field,\n                r.target_field as target_field,\n                r.sourceField as source_field_alt,\n                r.targetField as target_field_alt,\n                r.from_field as from_field,\n                r.to_field as to_field,\n                r.relationship_description as description,\n                r.relationshipDescription as description_alt,\n                r.created_at as created_at,\n                r.createdAt as created_at_alt\n            ORDER BY COALESCE(r.created_at, r.createdAt) DESC\n            '
2025-03-28 13:44:00,585 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e
2025-03-28 13:44:00,587 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e:opensearch
2025-03-28 13:44:00,588 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e:postgresql
2025-03-28 13:44:00,589 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e:neo4j
2025-03-28 13:44:01,072 - httpx - INFO - HTTP Request: POST https://openai-southus-trng-app-chatbot01.openai.azure.com/openai/deployments/gpt-4o/chat/completions?api-version=2024-02-15-preview "HTTP/1.1 200 OK"
2025-03-28 13:44:01,075 - tools.redis_tools - INFO - Successfully set key in Redis: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e
2025-03-28 13:44:01,075 - __main__ - INFO - Chat request completed successfully - User: user, UUID: e857c4e4-be46-41dc-9d9a-b3fd8b131a7e
2025-03-28 13:44:01,076 - __main__ - INFO - API完成: POST /chat, 状态码: 200
